{% extends 'base.html' %}
{% block extra_head %}
<script src="/site_media/js/jquery.tagsinput.min.js"></script>
<script type="text/javascript" src="/site_media/js/jquery.autocomplete.min.js"></script>
<link rel="stylesheet" type="text/css" href="/site_media/css/jquery.tagsinput.css" />
<link rel="stylesheet" type="text/css" href="/site_media/css/jquery.autocomplete.css" />
{% endblock %}

{% block content %}

<p>Or, <a href="/upload/">upload a file through the browser</a>.</p>

<form action="." method="post" enctype="multipart/form-data">
<table>
<tr>
<th>File</th>
<td>
{% if file_listing %}
<table width="100%">
{% for file in file_listing %}
<tr class="{% cycle 'even' 'odd'%}">
<td><input type="radio" value="{{file}}" name="source_file"/></td>
<td>{{file}}</td>
</tr>
{% endfor %}
</table>
{% else %}
<p>there are no files in the drop-off directory</p>
{% endif %}
</td>
</tr>

{{ form.as_table }}
<tr>
<th>Steps</th>
<td>
<input type="checkbox" name="upload_to_tahoe" checked="checked" />
upload source file to tahoe<br />
<input type="checkbox" name="extract_images" checked="checked" />
extract images<br />
<input type="checkbox" name="extract_metadata" checked="checked" />
extract metadata<br />
<input type="checkbox" name="submit_to_pcp" checked="checked" />
submit to Podcast Producer<br />

</td>
</tr>
</table>
{% if series_id %}
<input type="hidden" name="series" value="{{series_id}}" />
{% endif %}
<input type="submit" value="upload" />
</form>

<script type="text/javascript">
jQuery(document).ready(function() 
    { 
    jQuery('#id_tags').tagsInput({
      autocomplete_url:'/api/tagautocomplete'}
     );
    jQuery('#id_subject').tagsInput({
      autocomplete_url:'/api/subjectautocomplete',
      defaultText: 'add a subject'
      }
     );

   }
);

</script>

{% endblock %}
