{% extends 'base.html' %}

{% block js %}
 <link type="text/css" href="https://www1.columbia.edu/sec/ccnmtl/remote/jquery-ui/css/smoothness/jquery-ui-1.8.1.custom.css" rel="stylesheet" /> 
  <script type="text/javascript" src="https://www1.columbia.edu/sec/ccnmtl/remote/jquery-ui/js/jquery-1.4.2.min.js"></script> 
  <script type="text/javascript" src="https://www1.columbia.edu/sec/ccnmtl/remote/jquery-ui/js/jquery-ui-1.8.1.custom.min.js"></script> 
 
  <script type="text/javascript"> 
     $(function(){
       $('#tabs').tabs();
     });
  </script> 
  
  <style type="text/css"> 
    body{ font: 72.5% "Trebuchet MS", sans-serif; margin: 50px;}
  </style> 
 
{% endblock %}

{% block content %}
<h2>SureLink, a secure link generation tool by CCNMTL</h2> 
<p>This tool generates secure online media links to web-based media. With SureLink, Columbia faculty have reliable control over the public access of their online media within their course environments. It is used by the video team to generate an embed code and video links to both public and secure media.</p> 
<p>Embed script generated by this tool can be added directly into course service environments (Courseworks, Sakai Courseworks, Wikispaces, EdBlogs, Drupal) or project websites.</p> 
<p>See <a href="http://wiki.ccnmtl.columbia.edu/index.php/Using_SureLink"
 target="_blank">SureLink documentation</a> for complete details on how to use media file types and embed script.</p> 
 
<form method="GET"> 
 
  <label for="file"><b>Media (path) and filename:</b></label><br /> 
  <code>/www/data/ccnmtl/broadcast/</code><input type="text" size="200"
  style="width:50%" name="file" value="{{file}}"/><br /> 
  <span style="font-size:small">i.e. public
  media: <code>test/test_clip.mp4</code> or <code>test/test_clip.flv</code>;
   private media: <code>secure/test/test_stream.flv</code></span><br /> 
  <br /> 
  <label for="captions"><b><a href="http://flowplayer.org/plugins/flash/captions.html">Captions URL</a> (optional):</b></label>    
  <input type="text" name="captions" value="{{captions}}" style="width:50%" /> 
  <br /> 
  <label for="poster"><b>Poster:</b></label>  
  <select name="poster"> 
    <option value="http://ccnmtl.columbia.edu/broadcast/posters/vidthumb_480x360.jpg"  >CCNMTL 480x360</option> 
    <option value="http://ccnmtl.columbia.edu/broadcast/posters/vidthumb_480x272.jpg"  >CCNMTL 480x272</option> 
    <option value="http://ccnmtl.columbia.edu/broadcast/posters/vidthumb_320x240.jpg"  >CCNMTL 320x240</option> 
    <option value="default_custom_poster"   >broadcast/posters/[media path]/[filename].jpg</option> 
  </select> 
  <br /> 
  <label for="width"><b>Width:</b></label> 
  <input type="text" name="width" value="480" size="10" /> 
  <label for="height"><b>Height (not including controls):</b></label> 
  <input type="text" name="height" value="360" size="10"/> 
    <span style="font-size:small">(272 for widescreen)</span> 
  <br /> 
  <label for="protection"><b>Link type:</b></label> 
  <select name="protection"> 
     <option value="public-mp4-download"  >public mp4/mp3 non-streaming</option> 
     <option value="public"  >public streaming flv</option> 
     <option value="protected"  >protected streaming flv/protected mp3 (valid-user)</option> 
  </select> 
  <br /> 
  <label for="authtype"><b>Auth:</b></label>  
  <select name="authtype"> 
    <option value="">None (Public)</option> 
    <option value="default"  >Default to Context Auth (Courseworks, Sakai, EdBlogs, Wikispaces) [authtype=default]</option> 
    <option value="wikispaces"  >Wikispaces (Pamacea auth-domain) [authtype=wikispaces]</option> 
    <option value="auth"  >Standard UNI (Pamacea domain incompatible with wikispaces) [authtype=auth]</option> 
    <option value="wind"  >WIND [authtype=wind]</option> 
  </select> 
  <!--
  <br />
  <label for="player"><b>Player:</b></label>  
  <select name="player">
    <option value="v3">Standard (Flowplayer 3.1)</option>
    <option value="test">Experimental Flowplayer 3.2</option>
  </select>
  --> 
  <input type="hidden" name="player" value="v4" /> 
  <br /> 
 
  <input type="submit" value="Generate Link" /> 
 
<br /> 
 
</form> 

{% if file %}
<p/><p/>
<div class="ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">
  
<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#tabs-1">Raw HTML Embed</a></li>
<li class="ui-state-default ui-corner-top"><a href="#tabs-2a">Better Iframe Embed</a></li>
<li class="ui-state-default ui-corner-top"><a href="#tabs-2">Edblogs Embed</a></li>
<li class="ui-state-default ui-corner-top"><a href="#tabs-3">Drupal *5* at ccnmtl</a></li>
<li class="ui-state-default ui-corner-top"><a href="#tabs-4">GlobalMDP Study Embed</a></li>
</ul>

<div class="ui-tabs-panel ui-widget-content ui-corner-bottom" id="tabs-1"><textarea rows="3" cols="100">&lt;script type="text/javascript" src="{{src_url}}">&lt;/script></textarea></div>
<div class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide" id="tabs-2"><textarea rows="3" cols="100">[ccnmtl_video src="{{src_url}}"]</textarea></div>

<div class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide" id="tabs-2a">
  Use this especially in Courseworks and Sakai or any https link (so
  it will work with IE). This view does not work with Auth=default, so
  be sure to specify WIND (or the relevant option) 
  <textarea rows="3" 
  cols="100">&lt;iframe width="{{width}}" height="{{height|add:24}}" src="https://surelink.ccnmtl.columbia.edu/video/?{{vid_options}}{{protection_string}}" /&gt;</textarea></div>

<div class="ui-tabs-panel ui-widget-content ui-corner-bottom
	    ui-tabs-hide" id="tabs-3">
Instructions: Enter this into an embedded media field.  To configure a
media field
see <a href="http://wiki.ccnmtl.columbia.edu/index.php/Making_a_Drupal_Collection_Site#Content_Management">Making
    a Drupal Collection Site</a>.  If you want to embed the video
within flowing text on the page, then use the Raw HTML Embed, but make
sure the Auth type is the same as for the site (Wind or Pamacea) -- --
				--but this should be a rare situation.
<textarea rows="3" cols="100" style="width:100%%">http://ccnmtl.columbia.edu/stream/flv/xdrupalx/OPTIONS/{{file}}</textarea></div>
<div class="ui-tabs-panel ui-widget-content ui-corner-bottom
	    ui-tabs-hide" id="tabs-4">
<textarea rows="3" cols="100">
{% if public_mp4_download %}[mp4]http://ccnmtl.columbia.edu/broadcast/{{file}}{% if width %}[w]{{width}}{% endif %}{% if height %}[h]{{height}}{% endif %}[mp4]{% else %}[flv]{{public_url}}{% if width %}[w]{{width}}{% endif %}{% if height %}[h]{{height}}{% endif %}[flv]{% endif %}
</textarea>
</div>
</div>

{% if src_url %}
<div style="width:{{width}}"><h4>Preview</h4>
<script type="text/javascript" src="{{src_url}}"></script>
</div>
<br />
<div style="display:{% ifequal protection "public-mp4-download"%}none{% else %}block{% endifequal %}"><b>Unprotected Public</b> URL (e.g. for download):<br />
<a href="{{public_url}}">{{public_url}}</a>
  <p>To test a slow connection, replace "OPTIONS" with "slow".</p>
</div>
{% if public %}
     <div><h4>Login Preview</h4>
       <script type="text/javascript" src="http://ccnmtl.columbia.edu/stream/jsembed?force_login=true&{{vid_options}}"></script>
     </div>
{% endif %}
{% endif %}
{% endif %}

{% endblock %}
