{% extends 'base.html' %}

{% block js %}
  {% include 'main/jquery.html' %}
 
  <script type="text/javascript"> 
     $(function(){
       $('#tabs').tabs();
     });
  </script> 
  
  <style type="text/css"> 
    body{ font: 72.5% "Trebuchet MS", sans-serif; margin: 50px;}
  </style> 
 
{% endblock %}

{% block content %}
<h2>SureLink, a secure link generation tool by CCNMTL</h2> 
<p>This tool generates secure online media links to web-based media. With SureLink, Columbia faculty have reliable control over the public access of their online media within their course environments. It is used by the video team to generate an embed code and video links to both public and secure media.</p> 
<p>Embed script generated by this tool can be added directly into course service environments (Courseworks, Sakai Courseworks, Wikispaces, EdBlogs, Drupal) or project websites.</p> 
<p>See <a href="http://wiki.ccnmtl.columbia.edu/index.php/Using_SureLink"
 target="_blank">SureLink documentation</a> for complete details on how to use media file types and embed script.</p> 
 
<form method="GET"> 
<table>
<tr><td> 
  <label for="file"><b>Media (path) and filenames (one per line):</b></label></td><td>
  <input name="file" type="text" value="{{file.filename}}"/>
  <br /> 
  <span style="font-size:small">i.e. public
  media: <code>test/test_clip.mp4</code>
  or <code>test/test_clip.flv</code>;<br />
   private media: <code>secure/test/test_stream.flv</code></span>
</td></tr>
<tr><td>  <label for="captions"><b><a href="http://flowplayer.org/plugins/flash/captions.html">Captions
  URL</a> (optional):</b></label></td><td>
  <input type="text" name="captions" value="{{captions}}" style="width:50%" /> 
  <br /> 
</td></tr>
<tr><td>  <label for="poster"><b>Poster:</b></label></td><td>
  <select name="poster"> 
    {% if file.has_cuit_poster %}
    <option value="{{file.cuit_poster_url}}"  >Automatically created poster</option> 
    {% endif %}
		{% for po in poster_options %}
		<option value="{{po.value}}"
						{% if po.value == poster %}
						selected
						{% endif %}>{{po.label}}</option>
		{% endfor %}
  </select> 
  <br /> 
</td></tr>
<tr><td>  <label for="width"><b>Width:</b></label></td><td>
  <input type="text" name="width" value="{{file.guess_width}}" size="10" /> <br />
</td></tr>
<tr><td>  <label for="height"><b>Height (not including controls):</b></td><td>
  <br />
  <input type="text" name="height" value="{{file.guess_height}}" size="10"/> 
    <span style="font-size:small">(272 for widescreen)</span> 
  <br /> 
</td></tr>
<tr><td>  <label for="protection"><b>Link type:</b></label></td><td>
  <select name="protection"> 
		{% for po in protection_options %}
		<option value="{{po.value}}"
						{% if po.value == protection %}
						selected
						{% endif %}>{{po.label}}</option>
		{% endfor %}
  </select> 
  <br /> 
</td></tr>
<tr><td>  <label for="authtype"><b>Auth:</b></label></td><td>
  <select name="authtype"> 
		{% for ato in authtype_options %}
		<option value="{{ato.value}}"
						{% if ato.value == authtype %}
						selected
						{% endif %}>{{ato.label}}</option>
		{% endfor %}
  </select> 
</td></tr>
</table>
  <br /> 
 
  <input type="submit" value="Generate Link" /> 
 
<br /> 
 
</form> 

<p/><p/>
<div class="ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">
  
<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
<li class="ui-state-default ui-corner-top"><a href="#tabs-2a">Better Iframe Embed</a></li>
<li class="ui-state-default ui-corner-top"><a href="#tabs-3">Drupal *5* at ccnmtl</a></li>
<li class="ui-state-default ui-corner-top"><a href="#tabs-4">GlobalMDP Study Embed</a></li>
</ul>

<div class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide" id="tabs-2a">
  Use this especially in Courseworks and Sakai or any https link (so
  it will work with IE). This view does not work with Auth=default, so
  be sure to specify WIND (or the relevant option) 
  <textarea rows="{{rows}}" 
  cols="100" style="width:100%">{{surelink.iframe_embed}}
</textarea></div>

<div class="ui-tabs-panel ui-widget-content ui-corner-bottom
	    ui-tabs-hide" id="tabs-3">
Instructions: Enter this into an embedded media field.  To configure a
media field
see <a href="http://wiki.ccnmtl.columbia.edu/index.php/Making_a_Drupal_Collection_Site#Content_Management">Making
    a Drupal Collection Site</a>.  If you want to embed the video
within flowing text on the page, then use the Raw HTML Embed, but make
sure the Auth type is the same as for the site (Wind or Pamacea) -- --
				--but this should be a rare situation.
<textarea rows="{{rows}}" cols="100" 
style="width:100%">{{surelink.drupal_embed}}
</textarea></div>
<div class="ui-tabs-panel ui-widget-content ui-corner-bottom
	    ui-tabs-hide" id="tabs-4">
<textarea rows="{{rows}}" cols="100" style="width:100%">
{{surelink.mdp_embed}}
</textarea>
</div>
</div>

<table>
<tr><th>Preview</th>{% if not public %}<th>Login Preview</th>{% endif %}</tr>
<tr>
<td>
<div style="width:{{width}}"><script type="text/javascript" src="{{surelink.src_url}}"></script>
</div>
<br />
<div style="display:{% if protection == "public-mp4-download"%}none{% else %}block{% endif %}"><b>Unprotected Public</b> URL (e.g. for download):<br />
<a href="{{surelink.public_url}}">{{surelink.public_url}}</a>
  <p>To test a slow connection, replace "OPTIONS" with "slow".</p>
</div>
</td>
{% if not public %}
<td>
     <div>
       <script type="text/javascript" src="http://ccnmtl.columbia.edu/stream/jsembed?force_login=true&{{surelink.video_options}}"></script>
     </div>
</td>
{% endif %}
</tr>
</table>

{% endblock %}
