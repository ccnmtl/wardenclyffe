{% extends 'base.html' %}

{% block js %}
 <link type="text/css" href="https://www1.columbia.edu/sec/ccnmtl/remote/jquery-ui/css/smoothness/jquery-ui-1.8.1.custom.css" rel="stylesheet" /> 
  <script type="text/javascript" src="https://www1.columbia.edu/sec/ccnmtl/remote/jquery-ui/js/jquery-1.4.2.min.js"></script> 
  <script type="text/javascript" src="https://www1.columbia.edu/sec/ccnmtl/remote/jquery-ui/js/jquery-ui-1.8.1.custom.min.js"></script> 
 
  <script type="text/javascript"> 
     $(function(){
       $('#tabs').tabs();
     });
  </script> 
  
  <style type="text/css"> 
    body{ font: 72.5% "Trebuchet MS", sans-serif; margin: 50px;}
  </style> 
 
{% endblock %}

{% block content %}
<h2>SureLink, a secure link generation tool by CCNMTL</h2> 
<p>This tool generates secure online media links to web-based media. With SureLink, Columbia faculty have reliable control over the public access of their online media within their course environments. It is used by the video team to generate an embed code and video links to both public and secure media.</p> 
<p>Embed script generated by this tool can be added directly into course service environments (Courseworks, Sakai Courseworks, Wikispaces, EdBlogs, Drupal) or project websites.</p> 
<p>See <a href="http://wiki.ccnmtl.columbia.edu/index.php/Using_SureLink"
 target="_blank">SureLink documentation</a> for complete details on how to use media file types and embed script.</p> 
 
<form method="GET"> 
<table>
<tr><td> 
  <label for="file"><b>Media (path) and filenames (one per line):</b></label></td><td>
  <textarea name="files" cols="60" rows="5">{{files}}</textarea>
  <br /> 
  <span style="font-size:small">
<b>for videos in <code>/media/h264/ccnmtl/</code> (streamed from
	stream.ccnmtl.columbia.edu):</b><br />
do not include <code>public</code> or <code>secure</code> (those are
	implied by the Link Type below). Do include
	the initial slash. eg: <code>/test_public.mp4</code> with a Link
	Type of "mp4 public stream" will correspond
	to <code>/media/h264/ccnmtl/public/test_public.mp4</code>
	while <code>/test_secure.mp4</code> with a Link Type of "mp4 secure
	stream" will correspond
	to <code>/media/h264/ccnmtl/secure/test_secure.mp4</code>. <br />
<br />
<b>for videos in <code>broadcast</code>:</b><br />
i.e. public
  media: <code>test/test_clip.mp4</code>
  or <code>test/test_clip.flv</code>;<br />
   private media: <code>secure/test/test_stream.flv</code>

</span>
</td></tr>
<tr><td>  <label for="captions"><b><a href="http://flowplayer.org/plugins/flash/captions.html">Captions
  URL</a> (optional):</b></label></td><td>
  <input type="text" name="captions" value="{{captions}}" style="width:50%" /> 
  <br /> 
</td></tr>
<tr><td>  <label for="poster"><b>Poster:</b></label></td><td>
  <select name="poster"> 
		{% for po in poster_options %}
		<option value="{{po.value}}"
						{% ifequal po.value poster %}
						selected
						{% endifequal %}>{{po.label}}</option>
		{% endfor %}
  </select> 
  <br /> 
</td></tr>
<tr><td>  <label for="width"><b>Width:</b></label></td><td>
  <input type="text" name="width" value="480" size="10" /> <br />
</td></tr>
<tr><td>  <label for="height"><b>Height (not including controls):</b></td><td>
  <br />
  <input type="text" name="height" value="360" size="10"/> 
    <span style="font-size:small">(272 for widescreen)</span> 
  <br /> 
</td></tr>
<tr><td>  <label for="protection"><b>Link type:</b></label></td><td>
  <select name="protection"> 
		{% for po in protection_options %}
		<option value="{{po.value}}"
						{% ifequal po.value protection %}
						selected
						{% endifequal %}>{{po.label}}</option>
		{% endfor %}
  </select> 
  <br /> 
</td></tr>
<tr><td>  <label for="authtype"><b>Auth (for protected streams only):</b></label></td><td>
  <select name="authtype"> 
		{% for ato in authtype_options %}
		<option value="{{ato.value}}"
						{% ifequal ato.value authtype %}
						selected
						{% endifequal %}>{{ato.label}}</option>
		{% endfor %}
  </select> 
</td></tr>
</table>
  <br /> 
 
  <input type="submit" value="Generate Link" /> 
 
<br /> 
 
</form> 

{% if results %}
<p/><p/>
<div class="ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">
  
<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
<li class="ui-state-default ui-corner-top"><a href="#tabs-iframe">Iframe Embed</a></li>
<li class="ui-state-default ui-corner-top"><a href="#tabs-drupal">Drupal *5* at ccnmtl</a></li>
<li class="ui-state-default ui-corner-top"><a href="#tabs-globalmdp">GlobalMDP Study Embed</a></li>
</ul>

<div class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide" id="tabs-iframe">
  Use this especially in Courseworks and Sakai or any https link (so
  it will work with IE). This view does not work with Auth=default, so
  be sure to specify WIND (or the relevant option) 
  <textarea rows="{{rows}}" 
  cols="100" style="width:100%">{% for r in results %}{{r.iframe_embed}}
{% endfor %}</textarea></div>

<div class="ui-tabs-panel ui-widget-content ui-corner-bottom
	    ui-tabs-hide" id="tabs-drupal">
Instructions: Enter this into an embedded media field.  To configure a
media field
see <a href="http://wiki.ccnmtl.columbia.edu/index.php/Making_a_Drupal_Collection_Site#Content_Management">Making
    a Drupal Collection Site</a>.  If you want to embed the video
within flowing text on the page, then use the Raw HTML Embed, but make
sure the Auth type is the same as for the site (Wind or Pamacea) -- --
				--but this should be a rare situation.
<textarea rows="{{rows}}" cols="100" 
style="width:100%">{% for r in results %}{{r.drupal_embed}}
{% endfor %}</textarea></div>
<div class="ui-tabs-panel ui-widget-content ui-corner-bottom
	    ui-tabs-hide" id="tabs-globalmdp">
<textarea rows="{{rows}}" cols="100" style="width:100%">
{% for r in results %}{{r.mdp_embed}}
{% endfor %}
</textarea>
</div>
</div>

{% if files %}
<table>
<tr><th>Preview</th>{% if not public %}<th>Login Preview</th>{% endif %}</tr>
{% for r in results %}
<tr>
<td>
<div style="width:{{r.width}}"><script type="text/javascript" src="{{r.src_url}}"></script>
</div>
<br />
{% ifequal protection "public-mp4-download"%}
{% else %}
{% ifequal protection "mp4_secure_stream" %}
{% else %}
{% ifequal protection "mp4_public_stream" %}
{% else %}
<div><b>Unprotected Public</b> URL (e.g. for download):<br />
<a href="{{r.public_url}}">{{r.public_url}}</a>
  <p>To test a slow connection, replace "OPTIONS" with "slow".</p>
</div>
{% endifequal %}
{% endifequal %}
{% endifequal %}
</td>
{% if not public %}
<td>
     <div>
       <script type="text/javascript" src="http://ccnmtl.columbia.edu/stream/jsembed?force_login=true&{{r.video_options}}"></script>
     </div>
</td>
{% endif %}
</tr>
{% endfor %}
</table>
{% endif %}
{% endif %}

{% endblock %}
